.TH jabber.xml 5 " 1 Nov 2006" "@VERSION@" "jabberd14 project"
.SH NAME
jabber.xml \- jabberd daemon configuration file
.SH SYNOPSIS
The jabber daemon jabberd is configured by an XML configuration file. By
default jabberd will read \fI@sysconfdir@/jabber.xml\fR. The \fB-c\fR
command line option can be used to specify an alternate configuration file.
.SH "FILE FORMAT"
The configuration file has to be a valid XML document preferably in the
UTF-8 charset (ASCII is valid subset of UTF-8).

Within the following xpath expressions, the following namespace prefixes
are used:

default namespace: "jabber:iq:server",
browse: "jabber:iq:browse",
cfg: "http://jabberd.org/ns/configfile",
register: "jabber:iq:register",
vcard: "vcard-temp",
.TP
.B <jabber/>
This is the root element of the configuration file.
.TP
.B <service/>
This element is an immediate child element of the <jabber/> root element.
It defines a general purpose component in the jabber daemon. The jabber daemon
will route all stanzas to this component that have a domain part in the
destination JID that equals the id attribute or any defined additional
domains this component is responsible for using the <host/> child element.
An implementation or relation to an other process is defined using one of the
following child elements: <accept/>, <connect/>, <dynamic/>, <exec/>, <load/>,
<null/>. Any child elements in own namespaces are ignored by the core
jabberd and can be used by components to store their own configuration.
.TP
.B <xdb/>
This element is an immediate child element of the <jabber/> root element.
It defines a component in the jabber daemon, that is responsible for XML
data storage. This components internal address is defined by the id
attribute. The <host/> child elements define for which domains this storage
component is managing the data. An empty <host/> element defines, that it
is responsible for all components. With the <ns/> child element you can
limit the responsibility to XML chunks in a given set of namespaces. You
can then for example define one storage component that handles rosters and
an other that handles offline message storage.
An implementation or relation to an other process is defined using on of the
following child elements: <accept/>, <connect/>, <dynamic/>, <exec/>, <load/>,
<null/>. Any child elements in own namespaces are ignored by the core jabberd
and can be used by components to store their own configuration.
.TP
.B <log/>
This element is an immediate child element of the <jabber/> root element.
It defines a component in the jabber daemon, that acts as a logging sink.
This components internal address is defined by the id attribute. The <host/>
child elements define for which domains this logging sink is logging messages.
An empty <host/> element defines, that it is responsible for all components.
With the <logtype/> child element you can select the types of messages, that
are handled by this component.
Where to write the logging information is defined with one of the following
child elements: <file/>, <stderr/>, <stdout/>, <to/>.
With the <format/> child element you define the format of the logged message.
.TP
.B <io/>
This element is an immediate child element of the <jabber/> root element.
In this section of the configuration file you can define different settings
that are related to the network I/O layer. This includes bandwidth limitations
(using the <karma/> element), assigning X.509 certificates to sockets (using
the <ssl/> element), and to limit access to the server to specific IP address
ranges (using the <allow/> and <deny/> elements).
.TP
.B <pidfile/>
This element specifies to which file the server should write its process ID.
If this file already exists when the server is started, it will fail. You
have to remove stale pidfiles before starting the server yourself. If you
omit this element, the server will not write nor check any pidfile.
.TP
.B <debug/>
This element contains configuration settings controlling the output of
debugging messages. These settings can be changed at server runtime, the
server will reread them on receiving a SIGHUP signal.
.TP
The following elements are used inside the <service/>, <xdb/>, and <log/>
elements, that are defining components. They are used to provide the jabberd
process with information where it can find the component's implementation.
.TP
.B <load/>
This element can be used inside any component definition. It specifies, that
the implementation of the component can be found inside a shared object. Any
child element of this element defines a shared object file and a method in
this object. jabberd will load the shared object files which locations
are defined in the cdata elements inside the child elements, the names of the
elements are defining the functions that have to be called. An optional
main attribute in the <load/> element define the main function in a component,
that has to be used to initialize it.
.TP
.B <accept/>
This element defines, that jabberd will wait for an incoming connection using
the jabber:component:accept protocol defined in XEP-0114. With this it is
possible to run components in their own process, even on different hosts
and connect it to the main jabberd routing process. On the other end of the
connection there can be an instance of jabberd again that uses a section
with <connect/> to initiate the connection, but there are libraries in many
programming languages available, that implement XEP-0114 as well.
Inside this element you have to provide an <ip/> element, that defines the
IPv4 or IPv6 address to listen on, a <port/> element that defines on which
port the server will listen for the connection, and a <secret/> element, that
defines a shared secret to authenticate the other peer.
.TP
.B <connect/>
This element is the opposite of the <accept/> element. Jabberd will try to
connect to an implementation of the jabber:component:accept protocol defined
in XEP-0114.
Inside this element you have to provide an <ip/> element, that defines the
IPv4 or IPv6 address where to connect to, a <port/> element, that defines
the destination port, and a <secret/> element, that defines a shared secret
to authenticate to the other peer.
.TP
.B <file/>
This element can only be used inside a <log/> section. It is used to specify
that log messages should be appended to a text file.
.TP
.B <null/>
This element specifies an empty component. Everything that is sent to a JabberID
with the domain part of this component is silently discarded. It can be used
to drop stanzas directed to entities on the Jabber network, that have
disappeared (e.g. update.jabber.org).
.TP
.B <stderr/>
This element can only be used inside a <log/> section. It is used to specify
that log messages should be written to the standard error output stream.
.TP
.B <stdout/>
This element is used to define, that the jabberd process is communicating
with the process, that is implementing the component. It is the opposite
of <exec/>. A process that is started by <exec/> in an other process can
use <stdout/> to implement the other end of the connecting pipe.
.TP
.B <syslog/>
This element can only be used inside a <log/> section. It is used to specify
that log messages should be written to the syslog.
.TP
.B <to/>
This element can only be used inside a <log/> section. It is used to
reformat log packets as messages and resend them to an entity with the
given JabberID. The JabberID is given as cdata child element.
.TP
.B <unsubscribe/>
This element can only be used inside a <service/> section. It is used
to bounce messages and iq queries and send unsubscribes to presences, that
are received. It is intended to be used as a replacement for transports,
that are removed from a server. It will remove the roster items of this
transport from the users' rosters.
.TP
.B jsm setting: cfg:jabber/cfg:service/jsm:jsm/browse:browse
List of services, that should be returned as the result of a browsing or
a service discovery request. The format is as in a browse result stanza.
.TP
.B jsm setting: cfg:jabber/cfg:service/jsm:jsm/disco-info:disco/disco-info:identity
Name of the Jabber server, that should be returned in a service discovery reply.
If this is not configured, the FN field of the server's vCard
(cfg:jabber/cfg:service/jsm:jsm/vcard:vCard/vcard:FN) is used.
.TP
.B jsm setting: cfg:jabber/cfg:service/jsm:jsm/jsm:admin/reply
Message, that should be returned to someone, that has sent a message to the
servers address. (These messages are forwarded to all users having the 'adminmsg'
ACL right.)
.TP
.B jsm setting: cfg:jabber/cfg:service/jsm:jsm/jsm:agents
.TP
.B jsm setting: cfg:jabber/cfg:service/jsm:jsm/jsm:archive
.TP
.B jsm setting: cfg:jabber/cfg:service/jsm:jsm/jsm:auth
Redirect authentication handling (non-SASL only) to a component. The
address of the component has to be given as the textual content of this
configuration element. No default setting.
.TP
.B jsm setting: cfg:jabber/cfg:service/jsm:jsm/jsm:maxusers
The maximum number of users the server should expect per domain (more users
will get handled, but it may have performance impacts). A prime number
should be configured here. The default setting is 3001.
.TP
.B jsm setting: cfg:jabber/cfg:service/jsm:jsm/jsm:mod_auth_crypt/jsm:hash
.TP
.B jsm setting: cfg:jabber/cfg:service/jsm:jsm/jsm:mod_offline
.TP
.B jsm setting: cfg:jabber/cfg:service/jsm:jsm/jsm:mod_useridpolicy
.TP
.B jsm setting: cfg:jabber/cfg:service/jsm:jsm/jsm:mod_version
.TP
.B jsm setting: cfg:jabber/cfg:service/jsm:jsm/jsm:presence
.TP
.B jsm setting: cfg:jabber/cfg:service/jsm:jsm/jsm:vcard2jud
If the vCard a users sets should be forwarded to the first Jabber users
directory, that is configured in cfg:jabber/cfg:service/jsm:jsm/browse:browse.
.TP
.B jsm setting: cfg:jabber/cfg:service/jsm:jsm/register:register
Reply stanza to a jabber:iq:register get request. This configures what
a client gets asked, if a user tries an inband account registration.
.TP
.B jsm setting: cfg:jabber/cfg:service/jsm:jsm/vcard:vCard
The vCard, that gets returned, if a Jabber entity requests a vCard
for the server. No default value.
.TP
.B jsm setting: cfg:jabber/cfg:service/jsm:jsm/welcome
A message stanza, that should be sent to a new user. The content of the
welcome element is used as the content of the generated message stanza.
Therefore you should have a body element inside this one, and a subject
element might be good to have as well. It is possible to use xml:lang
attributes for the content of this element. No default setting, if
element is missing, no welcome message is generated.
.SH AUTHOR
Jabber Software Foundation
